<div>
  <div class="navigate-bar">
    <a class="pull-left icon-wrapper">
      <span class="navbar-brand">一账通外呼自助查询系统</span>
    </a>
    <a class="icon-wrapper">
      <span class="user-icon"></span>
    </a>
    <a class="icon-wrapper" *ngIf="!isLogin" (click)="showLoginModal()">
      <span class="login-btn" [ngClass]="{'login-btn-hover': isLoging}">登陆</span>
    </a>
    <a class="icon-wrapper" *ngIf="isLogin">
      <span class="user-name">Hi，<b>{{userName}}</b></span>
    </a>
    <a class="icon-wrapper" *ngIf="isLogin" (click)="disLogin()">
      <span class="login-btn">注销</span>
    </a>
  </div>
</div>
<!-- 试试 -->
<section *ngIf="isLogin" style="min-height: 610px;">
  <div class="search-bar">
    <div class="div-group">
      <form id="orgin" #orginForm method="POST" enctype="multipart/form-data" name="orginForm" class="formStyle">
        <input type="" name="mark" value="1" style="display: none">
        <span class="common-btn fileinput-button">
          选择
          <input type="file" name="file" id="fileChooseBtn" required="required" (change)="selectedFileOnChanged($event)" />
        </span>
        <input id="showFileName" type="text" readonly placeholder="未选择文件..." [value]="fileName">
        <input type="button" value="上传" [disabled]="!fileName||!downloadDataOneTimes" id="submitOrgin" class="common-btn"
          (click)="uploadFileAction()" [ngClass]="{ 'upload-btn-disabled':(!fileName)}">
      </form>
    </div>

    <div class="pull-right">
      <input type="button" value="下载" class="common-btn" (click)="downloadData()" title="需先选择日期" [disabled]="selectDateTime>=nowDate"
        [ngClass]="{ 'upload-btn-disabled':(selectDateTime>=nowDate)}">
    </div>
    <div class="div-group pull-right">
      <input type="button" value="查询" class="common-btn" (click)="searchForTime()" title="需先选择日期" [disabled]="selectDateTime>=nowDate"
        [ngClass]="{ 'upload-btn-disabled':(selectDateTime>=nowDate)}">
    </div>
    <div class="div-group pull-right" title="只支持查询前一天的数据">
      <eui-datebox [(ngModel)]="selectDateTime" format="yyyy-MM-dd"></eui-datebox>
      <br />
    </div>
    <div class="clear-fix"></div>
    <div class="div-group margin-top-10 font-size-14">
      <a (click)="chagePageBefore()" class="pagination-btn" [ngClass]="{ 'disabled':(pages?.pageNo < 2)}">上一页</a>
      <input [(ngModel)]="inputPageNo" type="input" (keyup.enter)="chagePages()" class="pagination-btn pagination-input">
      <a class="icon-wrapper pagination-total" title="总页数">/&nbsp;{{pages?.maxPageNo}}</a>
      <a (click)="chagePageNext()" class="pagination-btn" [ngClass]="{ 'disabled':(pages?.pageNo>=pages?.maxPageNo)}">下一页</a>
    </div>
  </div>
  <section class="list-content">
    <table class="my-table">
      <tr class="list-row-header">
        <td>记录号</td>
        <td>拨打时间</td>
        <td>联系方式</td>
        <td>联系客户次数</td>
        <td>拨打结果</td>
      </tr>
      <tr class="list-row" *ngFor="let item of items">
        <td class="list-cell">{{item?.recordId}}</td>
        <td class="list-cell">{{item?.callTime}}</td>
        <td class="list-cell">{{item?.contactInfo}}</td>
        <td class="list-cell">{{item?.attempt}}</td>
        <td class="list-cell">{{item?.visitResult}}</td>
      </tr>
      <tr *ngIf="pages?.total === 0">
        <td colspan="5"><span class="no-data"></span></td>
      </tr>
    </table>
  </section>
</section>
<div class="body-bg" *ngIf="!isLogin">
  <div class="modal" (click)="hideLoginModal()" *ngIf="isLoging">
    <div class="login-panel" (click)="stopPropagation($event)">
      <form class="form-control" (ngSubmit)="onSubmit()" role="form" #f="ngForm">
        <div class="form-group">
          <h3 class="diy-h3">智能语音系统</h3>
          <br><br>
        </div>
        <div class="form-group">
          <input required class="form-input" name="name" type="text" [(ngModel)]="userName" placeholder="请输入账号" />
        </div>
        <div class="form-group">
          <input required class="form-input" name="passWord" type="password" [(ngModel)]="passWord" placeholder="请输入密码" />
        </div>
        <div class="form-group">
          <input class="form-submit" type="submit" value="登陆" [disabled]="!(userName&&passWord)" [ngClass]="{'form-submit-disabled': !(userName&&passWord)}" />
        </div>
      </form>
    </div>
  </div>
</div>

<!-- <app-list *ngIf="isLogin"></app-list> -->
<div style="width:100%;height:40px;text-align:center;line-height: 40px;">
  @Copyright 平安科技.智能语音组.Design. All rights reserved.
</div>
